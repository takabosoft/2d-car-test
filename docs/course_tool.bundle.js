(()=>{"use strict";var e={337:(e,t,a)=>{a.r(t),a.d(t,{absolutize:()=>p,normalize:()=>k,parsePath:()=>h,serialize:()=>u});const s=0,r=1,n=2,o={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function c(e,t){return e.type===t}function h(e){const t=[],a=function(e){const t=new Array;for(;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:s,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:r,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:n,text:""},t}(e);let u="BOD",p=0,k=a[p];for(;!c(k,n);){let s=0;const n=[];if("BOD"===u){if("M"!==k.text&&"m"!==k.text)return h("M0,0"+e);p++,s=o[k.text],u=k.text}else c(k,r)?s=o[u]:(p++,s=o[k.text],u=k.text);if(!(p+s<a.length))throw new Error("Path data ended short");for(let e=p;e<p+s;e++){const t=a[e];if(!c(t,r))throw new Error("Param not a number: "+u+","+t.text);n[n.length]=+t.text}if("number"!=typeof o[u])throw new Error("Bad segment: "+u);{const e={key:u,data:n};t.push(e),p+=s,k=a[p],"M"===u&&(u="L"),"m"===u&&(u="l")}}return t}function u(e){const t=[];for(const{key:a,data:s}of e)switch(t.push(a),a){case"C":case"c":t.push(s[0],`${s[1]},`,s[2],`${s[3]},`,s[4],s[5]);break;case"S":case"s":case"Q":case"q":t.push(s[0],`${s[1]},`,s[2],s[3]);break;default:t.push(...s)}return t.join(" ")}function p(e){let t=0,a=0,s=0,r=0;const n=[];for(const{key:o,data:c}of e)switch(o){case"M":n.push({key:"M",data:[...c]}),[t,a]=c,[s,r]=c;break;case"m":t+=c[0],a+=c[1],n.push({key:"M",data:[t,a]}),s=t,r=a;break;case"L":n.push({key:"L",data:[...c]}),[t,a]=c;break;case"l":t+=c[0],a+=c[1],n.push({key:"L",data:[t,a]});break;case"C":n.push({key:"C",data:[...c]}),t=c[4],a=c[5];break;case"c":{const e=c.map(((e,s)=>s%2?e+a:e+t));n.push({key:"C",data:e}),t=e[4],a=e[5];break}case"Q":n.push({key:"Q",data:[...c]}),t=c[2],a=c[3];break;case"q":{const e=c.map(((e,s)=>s%2?e+a:e+t));n.push({key:"Q",data:e}),t=e[2],a=e[3];break}case"A":n.push({key:"A",data:[...c]}),t=c[5],a=c[6];break;case"a":t+=c[5],a+=c[6],n.push({key:"A",data:[c[0],c[1],c[2],c[3],c[4],t,a]});break;case"H":n.push({key:"H",data:[...c]}),t=c[0];break;case"h":t+=c[0],n.push({key:"H",data:[t]});break;case"V":n.push({key:"V",data:[...c]}),a=c[0];break;case"v":a+=c[0],n.push({key:"V",data:[a]});break;case"S":n.push({key:"S",data:[...c]}),t=c[2],a=c[3];break;case"s":{const e=c.map(((e,s)=>s%2?e+a:e+t));n.push({key:"S",data:e}),t=e[2],a=e[3];break}case"T":n.push({key:"T",data:[...c]}),t=c[0],a=c[1];break;case"t":t+=c[0],a+=c[1],n.push({key:"T",data:[t,a]});break;case"Z":case"z":n.push({key:"Z",data:[]}),t=s,a=r}return n}function k(e){const t=[];let a="",s=0,r=0,n=0,o=0,c=0,h=0;for(const{key:u,data:p}of e){switch(u){case"M":t.push({key:"M",data:[...p]}),[s,r]=p,[n,o]=p;break;case"C":t.push({key:"C",data:[...p]}),s=p[4],r=p[5],c=p[2],h=p[3];break;case"L":t.push({key:"L",data:[...p]}),[s,r]=p;break;case"H":s=p[0],t.push({key:"L",data:[s,r]});break;case"V":r=p[0],t.push({key:"L",data:[s,r]});break;case"S":{let e=0,n=0;"C"===a||"S"===a?(e=s+(s-c),n=r+(r-h)):(e=s,n=r),t.push({key:"C",data:[e,n,...p]}),c=p[0],h=p[1],s=p[2],r=p[3];break}case"T":{const[e,n]=p;let o=0,u=0;"Q"===a||"T"===a?(o=s+(s-c),u=r+(r-h)):(o=s,u=r);const k=s+2*(o-s)/3,l=r+2*(u-r)/3,d=e+2*(o-e)/3,i=n+2*(u-n)/3;t.push({key:"C",data:[k,l,d,i,e,n]}),c=o,h=u,s=e,r=n;break}case"Q":{const[e,a,n,o]=p,u=s+2*(e-s)/3,k=r+2*(a-r)/3,l=n+2*(e-n)/3,d=o+2*(a-o)/3;t.push({key:"C",data:[u,k,l,d,n,o]}),c=e,h=a,s=n,r=o;break}case"A":{const e=Math.abs(p[0]),a=Math.abs(p[1]),n=p[2],o=p[3],c=p[4],h=p[5],u=p[6];0===e||0===a?(t.push({key:"C",data:[s,r,h,u,h,u]}),s=h,r=u):s===h&&r===u||(d(s,r,h,u,e,a,n,o,c).forEach((function(e){t.push({key:"C",data:e})})),s=h,r=u);break}case"Z":t.push({key:"Z",data:[]}),s=n,r=o}a=u}return t}function l(e,t,a){return[e*Math.cos(a)-t*Math.sin(a),e*Math.sin(a)+t*Math.cos(a)]}function d(e,t,a,s,r,n,o,c,h,u){const p=(k=o,Math.PI*k/180);var k;let i=[],y=0,b=0,f=0,M=0;if(u)[y,b,f,M]=u;else{[e,t]=l(e,t,-p),[a,s]=l(a,s,-p);const o=(e-a)/2,u=(t-s)/2;let k=o*o/(r*r)+u*u/(n*n);k>1&&(k=Math.sqrt(k),r*=k,n*=k);const d=r*r,i=n*n,g=d*i-d*u*u-i*o*o,m=d*u*u+i*o*o,x=(c===h?-1:1)*Math.sqrt(Math.abs(g/m));f=x*r*u/n+(e+a)/2,M=x*-n*o/r+(t+s)/2,y=Math.asin(parseFloat(((t-M)/n).toFixed(9))),b=Math.asin(parseFloat(((s-M)/n).toFixed(9))),e<f&&(y=Math.PI-y),a<f&&(b=Math.PI-b),y<0&&(y=2*Math.PI+y),b<0&&(b=2*Math.PI+b),h&&y>b&&(y-=2*Math.PI),!h&&b>y&&(b-=2*Math.PI)}let g=b-y;if(Math.abs(g)>120*Math.PI/180){const e=b,t=a,c=s;b=h&&b>y?y+120*Math.PI/180*1:y+120*Math.PI/180*-1,i=d(a=f+r*Math.cos(b),s=M+n*Math.sin(b),t,c,r,n,o,0,h,[b,e,f,M])}g=b-y;const m=Math.cos(y),x=Math.sin(y),P=Math.cos(b),$=Math.sin(b),S=Math.tan(g/4),C=4/3*r*S,w=4/3*n*S,v=[e,t],L=[e+C*x,t-w*m],I=[a+C*$,s-w*P],T=[a,s];if(L[0]=2*v[0]-L[0],L[1]=2*v[1]-L[1],u)return[L,I,T].concat(i);{i=[L,I,T].concat(i);const e=[];for(let t=0;t<i.length;t+=3){const a=l(i[t][0],i[t][1],p),s=l(i[t+1][0],i[t+1][1],p),r=l(i[t+2][0],i[t+2][1],p);e.push([a[0],a[1],s[0],s[1],r[0],r[1]])}return e}}}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=a(337);$((()=>{console.log("course_tool"),$("#courseFile").on("change",(t=>{const a=t.target.files;if(null!=a&&a.length>0){const t=new FileReader;t.onload=t=>{const a=t.target.result;$("#img")[0].src=a,ImageTracer.imageToSVG(a,(t=>{const a=$(t);$("#res").empty().append(a),function(t){let a="";t.find("path").each(((t,s)=>{const r=$(s);if("0"==r.attr("opacity"))return;let n=[];const o=e=>{n.push(e)},c=()=>{n.length>0&&(a+="\npath: "+JSON.stringify(n),n=[])},h=(0,e.parsePath)(r.attr("d")+"");for(const e of h)switch(e.key){case"M":c();break;case"L":o([e.data[0],e.data[1]]);break;case"Q":o([e.data[2],e.data[3]]);break;case"Z":n.length>0&&o(n[0]),c();break;default:console.error("不明なパス要素")}})),$("#textarea").val(a)}(a)}),{linefilter:!0,pathomit:300,roundcoords:0})},t.readAsDataURL(a[0])}}))}))})()})();